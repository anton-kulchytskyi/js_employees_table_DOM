{"version":3,"sources":["scripts/main.js"],"names":["mark","table","document","querySelector","tableBody","header","querySelectorAll","countryArray","positionArray","i","count","addEventListener","index","headerArray","Array","from","rowArray","children","headerIndex","indexOf","target","sort","a","b","tdA","innerHTML","tdB","substring","split","join","forEach","item","appendChild","reverse","length","select","selected","parentElement","markRow","classList","remove","add","formAdd","map","country","body","insertAdjacentHTML","rectForm","getBoundingClientRect","topPos","bottom","leftPos","left","pushNotification","title","description","type","root","div","createElement","h2","p","append","className","setAttribute","style","top","innerText","boxSizing","setTimeout","notificationErrorName","notificationErrorPosition","notificationErrorAge","notificationErrorSalary","notificationSuccess","addForm","nameInput","positionInput","ageInput","convertSalary","salary","Intl","NumberFormat","format","convertText","value","String","replace","letter","toUpperCase","preventDefault","data","FormData","formData","Object","fromEntries","entries","newTr","name","position","office","age","backgroundColor","includes","reset","e","cell","editCell","input","cellIndex","padding","border","borderRadius","color","marginTop","outlineColor","replaceWith","text","focus","textHint","press","key","span","display","textAlign","fontSize","after"],"mappings":"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","file":"main.73d0ad2b.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst table = document.querySelector('table');\nconst tableBody = table.querySelector('tbody');\nconst header = table.querySelectorAll('thead th');\nconst countryArray = [\n  `Tokyo`,\n  `Singapore`,\n  `London`,\n  `New York`,\n  `Edinburgh`,\n  `San Francisco`,\n];\nconst positionArray = [\n  'Accountant',\n  'Data Coordinator',\n  'Developer',\n  'Financial Controller',\n  'Integration Specialist',\n  'Javascript Developer',\n  'QA Engineer',\n  'Marketing Designer',\n  'Regional Director',\n  'Regional Marketing',\n  'Software Engineer',\n  'Technical Author',\n];\n\n// table sorting by clicking on the title (in two directions)\n\nlet mark;\n\nfor (let i = 0; i < header.length; i++) {\n  let count = 0;\n\n  header[i].addEventListener('click', (index) => {\n    const headerArray = Array.from(header);\n    const rowArray = Array.from(tableBody.children);\n    const headerIndex = headerArray.indexOf(index.target);\n\n    if (mark !== i) {\n      count = 0;\n    }\n\n    rowArray.sort((a, b) => {\n      let tdA = a.children[headerIndex].innerHTML;\n      let tdB = b.children[headerIndex].innerHTML;\n\n      if (index.target.innerHTML === 'Salary') {\n        tdA = +a.children[headerIndex].innerHTML\n          .substring(1).split(',').join('');\n\n        tdB = +b.children[headerIndex].innerHTML\n          .substring(1).split(',').join('');\n      }\n\n      if (tdA > tdB) {\n        return 1;\n      } else if (tdA < tdB) {\n        return -1;\n      } else {\n        return 0;\n      }\n    });\n\n    if (count % 2 === 0) {\n      rowArray.forEach(item => tableBody.appendChild(item));\n      mark = i;\n    } else {\n      rowArray.reverse().forEach(item => tableBody.appendChild(item));\n    }\n    count++;\n  });\n};\n\n// select a row by user click\n\ntableBody.addEventListener('click', (select) => {\n  const selected = select.target.parentElement;\n  let markRow = 0;\n\n  for (let i = 0; i <= tableBody.children.length; i++) {\n    if (markRow !== i) {\n      tableBody.children[markRow].classList.remove('active');\n    }\n\n    selected.classList.add('active');\n    markRow = i;\n  }\n});\n\n// Form to add new employees to the spreadsheet.\n\nconst formAdd = `\n  <form action=\"/\" method=\"get\" class=\"new-employee-form\">\n    <label>Name:\n      <input\n        name=\"name\"\n        type=\"text\"\n        autocomplete=\"off\"\n        data-qa=\"name\"\n        required\n      >\n    </label>\n\n    <label>Position:\n      <input \n        name=\"position\"\n        type=\"text\"\n        data-qa=\"position\"\n        required\n      >\n    </label>\n\n    <label>\n      Office:\n      <select\n        name=\"office\"\n        data-qa=\"office\"\n        required\n      >\n      ${countryArray.map(country =>\n    `<option value=\"${country}\">${country}</option>`).join('')}\n      </select>\n    </label>\n\n    <label>Age:\n      <input\n        name=\"age\"\n        type=\"number\"\n        data-qa=\"age\"\n        required\n      >\n    </label>\n\n    <label>Salary:\n      <input\n        name=\"salary\"\n        type=\"number\"\n        min=\"50000\"\n        max=\"500000\"\n        data-qa=\"salary\"\n        required\n      >\n    </label>\n\n    <button type=\"submit\">Save to table</button>\n  </form >\n`;\n\ndocument.body.insertAdjacentHTML('beforeend', formAdd);\n\n// add a new employee to the table with validation\n\nconst rectForm\n= document.querySelector('.new-employee-form').getBoundingClientRect();\nconst topPos = rectForm.bottom + 10;\nconst leftPos = rectForm.left;\n\nconst pushNotification = (title, description, type) => {\n  const root = document.body;\n  const div = document.createElement('div');\n  const h2 = document.createElement('h2');\n  const p = document.createElement('p');\n\n  root.append(div);\n  div.append(h2);\n  div.append(p);\n  div.className = `notification ${type}`;\n  div.setAttribute('data-qa', 'notification');\n  div.style.top = `${topPos}px`;\n  div.style.left = `${leftPos}px`;\n  h2.className = `title`;\n  h2.innerText = `${title}`;\n  p.innerText = `${description}`;\n  div.style.boxSizing = `content-box`;\n\n  setTimeout(() => {\n    div.remove();\n  }, 2000);\n};\n\nconst notificationErrorName = () => {\n  return pushNotification('Sorry! Your name is short!',\n    'Name must contain at least 4 letters.', 'error');\n};\n\nconst notificationErrorPosition = () => {\n  return pushNotification('Sorry! Position is invalid!',\n    'Please specify your position.', 'error');\n};\n\nconst notificationErrorAge = () => {\n  return pushNotification('Sorry! Your age is not appropriate!',\n    'You must be over 18 and under 90.', 'error');\n};\n\nconst notificationErrorSalary = () => {\n  return pushNotification('Sorry! Salary is invalid!',\n    'The amount cannot be negative.', 'error');\n};\n\nconst notificationSuccess = () => {\n  return pushNotification('Ð¡ongratulations!',\n    'Your data is saved and added to the table.', 'success');\n};\n\nconst addForm = document.querySelector('.new-employee-form');\nconst nameInput = addForm.querySelector('input[name=\"name\"]');\nconst positionInput = addForm.querySelector('input[name=\"position\"]');\nconst ageInput = addForm.querySelector('input[name=\"age\"]');\n\nfunction convertSalary(salary) {\n  return `$${new Intl.NumberFormat('ja-JP').format(salary)}`;\n};\n\nfunction convertText(value) {\n  return String(value).replace(/(^\\w{1})|(\\s+\\w{1})/g,\n    letter => letter.toUpperCase());\n}\n\naddForm.addEventListener('submit', (add) => {\n  add.preventDefault();\n\n  const data = new FormData(addForm);\n  const formData = Object.fromEntries(data.entries());\n\n  const newTr = `\n  <tr>\n    <td>${convertText(formData.name)}</td>\n    <td>${convertText(formData.position)}</td>\n    <td>${formData.office}</td>\n    <td>${formData.age}</td>\n    <td>${convertSalary(formData.salary)}</td>\n  </td>\n`;\n\n  const nameForm = String(formData.name);\n\n  if (nameForm.length < 4) {\n    notificationErrorName();\n    nameInput.style.backgroundColor = `rgba(253, 0, 0, 0.3)`;\n  } else if (!positionArray.includes(convertText(formData.position))) {\n    notificationErrorPosition();\n    positionInput.style.backgroundColor = `rgba(253, 0, 0, 0.3)`;\n  } else if (ageInput.value < 18 || ageInput.value > 90) {\n    notificationErrorAge();\n    ageInput.style.backgroundColor = `rgba(253, 0, 0, 0.3)`;\n  } else {\n    notificationSuccess();\n\n    tableBody.insertAdjacentHTML('beforeend', newTr);\n    addForm.reset();\n  }\n});\n\naddForm.addEventListener('keyup', (e) => {\n  e.target.style.backgroundColor = ``;\n});\n\n// editing of table cells by double-clicking on it\n\ntableBody.addEventListener('dblclick', (cell) => {\n  const editCell = cell.target;\n  const input = document.createElement('input');\n  const select = document.createElement('select');\n  const cellIndex = editCell.cellIndex;\n\n  input.className = `cell-input`;\n  input.style.padding = `18px 18px 0`;\n  select.style.border = `1px solid #808080`;\n  select.style.borderRadius = `4px`;\n  select.style.color = `#808080`;\n  select.style.marginTop = `14px`;\n  select.style.padding = `4px`;\n  select.style.outlineColor = `#808080`;\n\n  switch (cellIndex) {\n    case 1:\n      editCell.replaceWith(select);\n\n      select.innerHTML = `${positionArray.map(position =>\n        `<option value=\"${position}\">${position}</option>`).join('')}`;\n      break;\n    case 2:\n      editCell.replaceWith(select);\n\n      select.innerHTML = `${countryArray.map(country =>\n        `<option value=\"${country}\">${country}</option>`).join('')}`;\n      break;\n    case 3:\n    case 4:\n      editCell.replaceWith(input);\n      input.setAttribute('type', 'number');\n      break;\n\n    default:\n      editCell.replaceWith(input);\n      input.setAttribute('type', 'text');\n      break;\n  }\n  input.focus();\n  select.focus();\n\n  input.addEventListener('keyup', () => {\n    switch (cellIndex) {\n      case 0:\n        if (input.value.length > 0\n          && input.value.length < 4\n          && !input.parentElement.querySelector('span')) {\n          textHint(input, cellIndex);\n        } else if (input.value.length >= 4\n          && input.parentElement.querySelector('span')) {\n          input.parentElement.querySelector('span').remove();\n        }\n        break;\n      case 3:\n        if ((input.value < 18 || input.value > 90)\n        && !input.parentElement.querySelector('span')) {\n          textHint(input, cellIndex);\n        } else if (input.value >= 18\n          && input.value <= 90\n          && input.parentElement.querySelector('span')) {\n          input.parentElement.querySelector('span').remove();\n        }\n        break;\n      case 4:\n        if (input.value < 0 && !input.parentElement.querySelector('span')) {\n          textHint(input, cellIndex);\n        } else if (input.value > 0\n          && input.parentElement.querySelector('span')) {\n          input.parentElement.querySelector('span').remove();\n        }\n        break;\n    }\n  });\n\n  function text() {\n    switch (cellIndex) {\n      case 0:\n        (input.value.length < 4)\n          ? notificationErrorName()\n          : editCell.innerText = convertText(input.value);\n        break;\n      case 1:\n      case 2:\n        editCell.innerText = select.value;\n        select.replaceWith(editCell);\n        break;\n      case 3:\n        (input.value < 18 || input.value > 90)\n          ? notificationErrorAge()\n          : editCell.innerText = input.value;\n        break;\n      case 4:\n        (input.value <= 0)\n          ? notificationErrorSalary()\n          : editCell.innerText = convertSalary(input.value);\n        break;\n    }\n\n    if (input.parentElement.querySelector('span')) {\n      input.parentElement.querySelector('span').remove();\n    }\n    input.replaceWith(editCell);\n  };\n\n  input.addEventListener('blur', () => {\n    text();\n  });\n\n  input.addEventListener('keydown', (press) => {\n    if (press.key === 'Enter') {\n      text();\n    }\n  });\n\n  select.addEventListener('blur', () => {\n    text();\n  });\n\n  select.addEventListener('keydown', (press) => {\n    if (press.key === 'Enter') {\n      text();\n    }\n  });\n});\n\n// some upgrade - add a hint text under input\n\nconst textHint = (item, index) => {\n  const span = document.createElement('span');\n\n  span.style.display = `block`;\n  span.style.textAlign = `center`;\n  span.style.color = `#f00`;\n  span.style.fontSize = `10px`;\n\n  switch (index) {\n    case 0:\n      span.innerText = 'Name must contain at least 4 letters.';\n      break;\n    case 3:\n      span.innerText = 'You age must be over 18 and under 90.';\n      break;\n    case 4:\n      span.innerText = 'The amount cannot be negative.';\n      break;\n  }\n\n  item.after(span);\n};\n"]}